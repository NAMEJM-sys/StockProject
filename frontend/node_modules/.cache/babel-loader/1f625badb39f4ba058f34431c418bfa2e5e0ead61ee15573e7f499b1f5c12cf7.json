{"ast":null,"code":"var _jsxFileName = \"C:\\\\ProPython\\\\Stock2\\\\frontend\\\\src\\\\ComponentsCalculations\\\\ADXCalculations3.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport FetchADXData from '../Fetch/FetchStockOrignal/FetchADXData';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ADXCalculations3({\n  stockCode,\n  onScoreCalculated\n}) {\n  _s();\n  const [adxData, setADXData] = useState([]);\n  const calculateADXDirectionScore = (adxData, period = 14) => {\n    if (adxData.length < period) {\n      return null;\n    }\n    const recentData = adxData.slice(-period);\n    const adxValues = recentData.map(data => data.ADX);\n\n    // 선형 회귀를 통한 ADX 추세 분석\n    const indices = [...Array(period).keys()];\n    const n = period;\n    const sumX = indices.reduce((a, b) => a + b, 0);\n    const sumY = adxValues.reduce((a, b) => a + b, 0);\n    const sumXY = indices.reduce((sum, x, i) => sum + x * adxValues[i], 0);\n    const sumX2 = indices.reduce((sum, x) => sum + x * x, 0);\n    const slope = (n * sumXY - sumX * sumY) / (n * sumX2 - sumX * sumX);\n    let scoreAdjustment = 0;\n    if (slope > 0) {\n      // 추세 강도 강화\n      const lastIndex = adxData.length - 1;\n      const diPlus = adxData[lastIndex].DI14Plus;\n      const diMinus = adxData[lastIndex].DI14Minus;\n      if (diPlus > diMinus) {\n        scoreAdjustment -= 1; // 매수 쪽으로\n      } else if (diPlus < diMinus) {\n        scoreAdjustment += 1; // 매도 쪽으로\n      }\n    }\n\n    // 기본 점수는 5점\n    let score = 5 + scoreAdjustment;\n\n    // 점수 범위 조정\n    score = Math.max(1, Math.min(10, score));\n    return score;\n  };\n  useEffect(() => {\n    if (adxData.length > 0) {\n      const score = calculateADXDirectionScore(adxData);\n      if (score !== null && onScoreCalculated) {\n        onScoreCalculated(score);\n      }\n    }\n  }, [adxData]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(FetchADXData, {\n      stockCode: stockCode,\n      onADXFetch: setADXData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 9\n  }, this);\n}\n_s(ADXCalculations3, \"r4FE7Ywn0QsXNQ9IphxNtY/DUFI=\");\n_c = ADXCalculations3;\nexport default ADXCalculations3;\nvar _c;\n$RefreshReg$(_c, \"ADXCalculations3\");","map":{"version":3,"names":["React","useState","useEffect","FetchADXData","jsxDEV","_jsxDEV","ADXCalculations3","stockCode","onScoreCalculated","_s","adxData","setADXData","calculateADXDirectionScore","period","length","recentData","slice","adxValues","map","data","ADX","indices","Array","keys","n","sumX","reduce","a","b","sumY","sumXY","sum","x","i","sumX2","slope","scoreAdjustment","lastIndex","diPlus","DI14Plus","diMinus","DI14Minus","score","Math","max","min","children","onADXFetch","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/ProPython/Stock2/frontend/src/ComponentsCalculations/ADXCalculations3.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport FetchADXData from '../Fetch/FetchStockOrignal/FetchADXData';\r\n\r\nfunction ADXCalculations3({ stockCode, onScoreCalculated }) {\r\n    const [adxData, setADXData] = useState([]);\r\n\r\n    const calculateADXDirectionScore = (adxData, period = 14) => {\r\n        if (adxData.length < period) {\r\n            return null;\r\n        }\r\n\r\n        const recentData = adxData.slice(-period);\r\n        const adxValues = recentData.map(data => data.ADX);\r\n\r\n        // 선형 회귀를 통한 ADX 추세 분석\r\n        const indices = [...Array(period).keys()];\r\n        const n = period;\r\n        const sumX = indices.reduce((a, b) => a + b, 0);\r\n        const sumY = adxValues.reduce((a, b) => a + b, 0);\r\n        const sumXY = indices.reduce((sum, x, i) => sum + x * adxValues[i], 0);\r\n        const sumX2 = indices.reduce((sum, x) => sum + x * x, 0);\r\n\r\n        const slope = (n * sumXY - sumX * sumY) / (n * sumX2 - sumX * sumX);\r\n\r\n        let scoreAdjustment = 0;\r\n\r\n        if (slope > 0) {\r\n            // 추세 강도 강화\r\n            const lastIndex = adxData.length - 1;\r\n            const diPlus = adxData[lastIndex].DI14Plus;\r\n            const diMinus = adxData[lastIndex].DI14Minus;\r\n\r\n            if (diPlus > diMinus) {\r\n                scoreAdjustment -= 1; // 매수 쪽으로\r\n            } else if (diPlus < diMinus) {\r\n                scoreAdjustment += 1; // 매도 쪽으로\r\n            }\r\n        }\r\n\r\n        // 기본 점수는 5점\r\n        let score = 5 + scoreAdjustment;\r\n\r\n        // 점수 범위 조정\r\n        score = Math.max(1, Math.min(10, score));\r\n\r\n        return score;\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (adxData.length > 0) {\r\n            const score = calculateADXDirectionScore(adxData);\r\n            if (score !== null && onScoreCalculated) {\r\n                onScoreCalculated(score);\r\n            }\r\n        }\r\n    }, [adxData]);\r\n\r\n    return (\r\n        <div>\r\n            <FetchADXData stockCode={stockCode} onADXFetch={setADXData} />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ADXCalculations3;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}