{"ast":null,"code":"var _jsxFileName = \"C:\\\\ProPython\\\\Stock2\\\\frontend\\\\src\\\\ComponentsAnalysis\\\\MFIAnalysis2.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport FetchMFIData from \"../ComponentsFetch/FetchMFIData\";\nimport FetchStockDataForCode from \"../ComponentsFetch/FetchStockDataForCode\";\n\n// 스윙 저점 찾기 함수\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst findSwingLows = (data, range, valueKey) => {\n  let swingLows = [];\n  for (let i = range; i < data.length - range; i++) {\n    let isSwingLow = true;\n    for (let j = 1; j <= range; j++) {\n      if (data[i - j][valueKey] <= data[i][valueKey] || data[i + j][valueKey] <= data[i][valueKey]) {\n        isSwingLow = false;\n        break;\n      }\n    }\n    if (isSwingLow) {\n      swingLows.push({\n        value: data[i][valueKey],\n        index: i,\n        date: data[i].date\n      });\n    }\n  }\n  return swingLows;\n};\n\n// 스윙 고점 찾기 함수\nconst findSwingHighs = (data, range, valueKey) => {\n  let swingHighs = [];\n  for (let i = range; i < data.length - range; i++) {\n    let isSwingHigh = true;\n    for (let j = 1; j <= range; j++) {\n      if (data[i - j][valueKey] >= data[i][valueKey] || data[i + j][valueKey] >= data[i][valueKey]) {\n        isSwingHigh = false;\n        break;\n      }\n    }\n    if (isSwingHigh) {\n      swingHighs.push({\n        value: data[i][valueKey],\n        index: i,\n        date: data[i].date\n      });\n    }\n  }\n  return swingHighs;\n};\nfunction MFIAnalysis2({\n  stockCode\n}) {\n  _s();\n  const [mfiData, setMFIData] = useState([]);\n  const [stockData, setStockData] = useState([]);\n  const [divergenceResult, setDivergenceResult] = useState(\"\");\n  const analyzeMFIDivergence = () => {\n    const swingRange = 2; // 스윙 고점/저점 판단을 위한 범위 설정\n    const dataLength = Math.min(mfiData.length, stockData.length);\n\n    // 데이터 충분성 검사\n    if (dataLength < swingRange * 2) {\n      setDivergenceResult(\"데이터가 충분하지 않습니다.\");\n      return;\n    }\n\n    // 스윙 저점과 고점 찾기\n    const priceLows = findSwingLows(stockData, swingRange, 'close');\n    const priceHighs = findSwingHighs(stockData, swingRange, 'close');\n    const mfiLows = findSwingLows(mfiData, swingRange, 'MFI');\n    const mfiHighs = findSwingHighs(mfiData, swingRange, 'MFI');\n    let result = \"\";\n\n    // 갱신된 고점과 저점으로 다이버전스 감지\n    if (priceLows.length >= 2 && mfiLows.length >= 2) {\n      const prevPriceLow = priceLows[priceLows.length - 2];\n      const recentPriceLow = priceLows[priceLows.length - 1];\n      const prevMFILow = mfiLows.find(mfiLow => mfiLow.date === prevPriceLow.date);\n      const recentMFILow = mfiLows.find(mfiLow => mfiLow.date === recentPriceLow.date);\n      if (prevMFILow && recentMFILow) {\n        if (recentPriceLow.value < prevPriceLow.value && recentMFILow.value > prevMFILow.value) {\n          result += `상승 다이버전스 감지: 주가는 더 낮은 저점을 형성했지만, MFI는 더 높은 저점을 형성했습니다. 이는 매수 신호일 수 있습니다.<br/>`;\n        }\n      }\n    }\n    if (priceHighs.length >= 2 && mfiHighs.length >= 2) {\n      const prevPriceHigh = priceHighs[priceHighs.length - 2];\n      const recentPriceHigh = priceHighs[priceHighs.length - 1];\n      const prevMFIHigh = mfiHighs.find(mfiHigh => mfiHigh.date === prevPriceHigh.date);\n      const recentMFIHigh = mfiHighs.find(mfiHigh => mfiHigh.date === recentPriceHigh.date);\n      if (prevMFIHigh && recentMFIHigh) {\n        if (recentPriceHigh.value > prevPriceHigh.value && recentMFIHigh.value < prevMFIHigh.value) {\n          result += `하락 다이버전스 감지: 주가는 더 높은 고점을 형성했지만, MFI는 더 낮은 고점을 형성했습니다. 이는 매도 신호일 수 있습니다.<br/>`;\n        }\n      }\n    }\n    if (!result) {\n      result = \"현재 다이버전스가 감지되지 않았습니다. 지속적인 모니터링이 필요합니다.\";\n    }\n    setDivergenceResult(result);\n  };\n  useEffect(() => {\n    if (mfiData.length > 0 && stockData.length > 0) {\n      analyzeMFIDivergence();\n    }\n  }, [mfiData, stockData]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(FetchMFIData, {\n      stockCode: stockCode,\n      onMFIFetch: setMFIData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(FetchStockDataForCode, {\n      stockCode: stockCode,\n      onSDFCFetch: setStockData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n      children: \"MFI \\uB2E4\\uC774\\uBC84\\uC804\\uC2A4 \\uBD84\\uC11D\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      dangerouslySetInnerHTML: {\n        __html: divergenceResult\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 108,\n    columnNumber: 9\n  }, this);\n}\n_s(MFIAnalysis2, \"TAAoWKKF9hGkpgSxt0DG46hsSZs=\");\n_c = MFIAnalysis2;\nexport default MFIAnalysis2;\nvar _c;\n$RefreshReg$(_c, \"MFIAnalysis2\");","map":{"version":3,"names":["React","useState","useEffect","FetchMFIData","FetchStockDataForCode","jsxDEV","_jsxDEV","findSwingLows","data","range","valueKey","swingLows","i","length","isSwingLow","j","push","value","index","date","findSwingHighs","swingHighs","isSwingHigh","MFIAnalysis2","stockCode","_s","mfiData","setMFIData","stockData","setStockData","divergenceResult","setDivergenceResult","analyzeMFIDivergence","swingRange","dataLength","Math","min","priceLows","priceHighs","mfiLows","mfiHighs","result","prevPriceLow","recentPriceLow","prevMFILow","find","mfiLow","recentMFILow","prevPriceHigh","recentPriceHigh","prevMFIHigh","mfiHigh","recentMFIHigh","children","onMFIFetch","fileName","_jsxFileName","lineNumber","columnNumber","onSDFCFetch","dangerouslySetInnerHTML","__html","_c","$RefreshReg$"],"sources":["C:/ProPython/Stock2/frontend/src/ComponentsAnalysis/MFIAnalysis2.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport FetchMFIData from \"../ComponentsFetch/FetchMFIData\";\r\nimport FetchStockDataForCode from \"../ComponentsFetch/FetchStockDataForCode\";\r\n\r\n// 스윙 저점 찾기 함수\r\nconst findSwingLows = (data, range, valueKey) => {\r\n    let swingLows = [];\r\n    for (let i = range; i < data.length - range; i++) {\r\n        let isSwingLow = true;\r\n        for (let j = 1; j <= range; j++) {\r\n            if (data[i - j][valueKey] <= data[i][valueKey] || data[i + j][valueKey] <= data[i][valueKey]) {\r\n                isSwingLow = false;\r\n                break;\r\n            }\r\n        }\r\n        if (isSwingLow) {\r\n            swingLows.push({ value: data[i][valueKey], index: i, date: data[i].date });\r\n        }\r\n    }\r\n    return swingLows;\r\n};\r\n\r\n// 스윙 고점 찾기 함수\r\nconst findSwingHighs = (data, range, valueKey) => {\r\n    let swingHighs = [];\r\n    for (let i = range; i < data.length - range; i++) {\r\n        let isSwingHigh = true;\r\n        for (let j = 1; j <= range; j++) {\r\n            if (data[i - j][valueKey] >= data[i][valueKey] || data[i + j][valueKey] >= data[i][valueKey]) {\r\n                isSwingHigh = false;\r\n                break;\r\n            }\r\n        }\r\n        if (isSwingHigh) {\r\n            swingHighs.push({ value: data[i][valueKey], index: i, date: data[i].date });\r\n        }\r\n    }\r\n    return swingHighs;\r\n};\r\n\r\nfunction MFIAnalysis2({ stockCode }) {\r\n    const [mfiData, setMFIData] = useState([]);\r\n    const [stockData, setStockData] = useState([]);\r\n    const [divergenceResult, setDivergenceResult] = useState(\"\");\r\n\r\n    const analyzeMFIDivergence = () => {\r\n        const swingRange = 2; // 스윙 고점/저점 판단을 위한 범위 설정\r\n        const dataLength = Math.min(mfiData.length, stockData.length);\r\n\r\n        // 데이터 충분성 검사\r\n        if (dataLength < swingRange * 2) {\r\n            setDivergenceResult(\"데이터가 충분하지 않습니다.\");\r\n            return;\r\n        }\r\n\r\n        // 스윙 저점과 고점 찾기\r\n        const priceLows = findSwingLows(stockData, swingRange, 'close');\r\n        const priceHighs = findSwingHighs(stockData, swingRange, 'close');\r\n\r\n        const mfiLows = findSwingLows(mfiData, swingRange, 'MFI');\r\n        const mfiHighs = findSwingHighs(mfiData, swingRange, 'MFI');\r\n\r\n        let result = \"\";\r\n\r\n        // 갱신된 고점과 저점으로 다이버전스 감지\r\n        if (priceLows.length >= 2 && mfiLows.length >= 2) {\r\n            const prevPriceLow = priceLows[priceLows.length - 2];\r\n            const recentPriceLow = priceLows[priceLows.length - 1];\r\n\r\n            const prevMFILow = mfiLows.find(mfiLow => mfiLow.date === prevPriceLow.date);\r\n            const recentMFILow = mfiLows.find(mfiLow => mfiLow.date === recentPriceLow.date);\r\n\r\n            if (prevMFILow && recentMFILow) {\r\n                if (recentPriceLow.value < prevPriceLow.value && recentMFILow.value > prevMFILow.value) {\r\n                    result += `상승 다이버전스 감지: 주가는 더 낮은 저점을 형성했지만, MFI는 더 높은 저점을 형성했습니다. 이는 매수 신호일 수 있습니다.<br/>`;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (priceHighs.length >= 2 && mfiHighs.length >= 2) {\r\n            const prevPriceHigh = priceHighs[priceHighs.length - 2];\r\n            const recentPriceHigh = priceHighs[priceHighs.length - 1];\r\n\r\n            const prevMFIHigh = mfiHighs.find(mfiHigh => mfiHigh.date === prevPriceHigh.date);\r\n            const recentMFIHigh = mfiHighs.find(mfiHigh => mfiHigh.date === recentPriceHigh.date);\r\n\r\n            if (prevMFIHigh && recentMFIHigh) {\r\n                if (recentPriceHigh.value > prevPriceHigh.value && recentMFIHigh.value < prevMFIHigh.value) {\r\n                    result += `하락 다이버전스 감지: 주가는 더 높은 고점을 형성했지만, MFI는 더 낮은 고점을 형성했습니다. 이는 매도 신호일 수 있습니다.<br/>`;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (!result) {\r\n            result = \"현재 다이버전스가 감지되지 않았습니다. 지속적인 모니터링이 필요합니다.\";\r\n        }\r\n\r\n        setDivergenceResult(result);\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (mfiData.length > 0 && stockData.length > 0) {\r\n            analyzeMFIDivergence();\r\n        }\r\n    }, [mfiData, stockData]);\r\n\r\n    return (\r\n        <div>\r\n            <FetchMFIData stockCode={stockCode} onMFIFetch={setMFIData} />\r\n            <FetchStockDataForCode stockCode={stockCode} onSDFCFetch={setStockData} />\r\n            <h4>MFI 다이버전스 분석</h4>\r\n            <p dangerouslySetInnerHTML={{ __html: divergenceResult }}></p>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default MFIAnalysis2;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}