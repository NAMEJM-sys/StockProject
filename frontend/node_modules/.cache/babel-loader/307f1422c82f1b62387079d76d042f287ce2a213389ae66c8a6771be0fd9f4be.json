{"ast":null,"code":"var _jsxFileName = \"C:\\\\ProPython\\\\Stock2\\\\frontend\\\\src\\\\ComponentsCalculations\\\\MACDCalculations5.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport FetchMACDData from '../ComponentsFetch/FetchMACDData';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction MACDCalculations5({\n  stockCode,\n  onScoreCalculated\n}) {\n  _s();\n  const [macdData, setMACDData] = useState([]);\n  const calculateTrendStrengthScore = (macdData, period = 5) => {\n    if (macdData.length < period + 1) {\n      return null;\n    }\n\n    // MACD 변화량 직접 계산\n    const recentData = macdData.slice(-period - 1);\n    const macdChanges = [];\n    for (let i = 1; i < recentData.length; i++) {\n      macdChanges.push(recentData[i].MACD_Line - recentData[i - 1].MACD_Line);\n    }\n    const avgMACDChange = macdChanges.slice(0, -1).reduce((a, b) => a + b, 0) / (period - 1);\n\n    // 최근 MACD 변화량 계산\n    const currentMACDChange = macdChanges[macdChanges.length - 1];\n    let scoreAdjustment = 0;\n\n    // 현재 MACD 변화량이 평균보다 큰지 판단\n    if (Math.abs(currentMACDChange) > Math.abs(avgMACDChange)) {\n      // 현재 MACD 추세 방향 판단\n      const lastIndex = macdData.length - 1;\n      const currentMACD = macdData[lastIndex].MACD_Line;\n      const currentSignal = macdData[lastIndex].Signal_Line;\n      if (currentMACD > currentSignal) {\n        // 상승 추세에서 추세 강화\n        scoreAdjustment -= 1; // 매수 쪽으로\n      } else if (currentMACD < currentSignal) {\n        // 하락 추세에서 추세 강화\n        scoreAdjustment += 1; // 매도 쪽으로\n      }\n    }\n\n    // 기본 점수는 5점\n    let score = 5 + scoreAdjustment;\n\n    // 점수 범위 조정\n    score = Math.max(1, Math.min(10, score));\n    return score;\n  };\n  useEffect(() => {\n    if (macdData.length > 0) {\n      const score = calculateTrendStrengthScore(macdData);\n      if (score !== null && onScoreCalculated) {\n        onScoreCalculated(score);\n      }\n    }\n  }, [macdData]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(FetchMACDData, {\n      stockCode: stockCode,\n      onMACDFetch: setMACDData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 9\n  }, this);\n}\n_s(MACDCalculations5, \"EYz31eZL7osLf17TcCvP4CHG3+k=\");\n_c = MACDCalculations5;\nexport default MACDCalculations5;\nvar _c;\n$RefreshReg$(_c, \"MACDCalculations5\");","map":{"version":3,"names":["React","useState","useEffect","FetchMACDData","jsxDEV","_jsxDEV","MACDCalculations5","stockCode","onScoreCalculated","_s","macdData","setMACDData","calculateTrendStrengthScore","period","length","recentData","slice","macdChanges","i","push","MACD_Line","avgMACDChange","reduce","a","b","currentMACDChange","scoreAdjustment","Math","abs","lastIndex","currentMACD","currentSignal","Signal_Line","score","max","min","children","onMACDFetch","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/ProPython/Stock2/frontend/src/ComponentsCalculations/MACDCalculations5.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport FetchMACDData from '../ComponentsFetch/FetchMACDData';\r\n\r\nfunction MACDCalculations5({ stockCode, onScoreCalculated }) {\r\n    const [macdData, setMACDData] = useState([]);\r\n\r\n    const calculateTrendStrengthScore = (macdData, period = 5) => {\r\n        if (macdData.length < period + 1) {\r\n            return null;\r\n        }\r\n\r\n        // MACD 변화량 직접 계산\r\n        const recentData = macdData.slice(-period - 1);\r\n        const macdChanges = [];\r\n\r\n        for (let i = 1; i < recentData.length; i++) {\r\n            macdChanges.push(recentData[i].MACD_Line - recentData[i - 1].MACD_Line);\r\n        }\r\n\r\n        const avgMACDChange = macdChanges.slice(0, -1).reduce((a, b) => a + b, 0) / (period - 1);\r\n\r\n        // 최근 MACD 변화량 계산\r\n        const currentMACDChange = macdChanges[macdChanges.length - 1];\r\n\r\n        let scoreAdjustment = 0;\r\n\r\n        // 현재 MACD 변화량이 평균보다 큰지 판단\r\n        if (Math.abs(currentMACDChange) > Math.abs(avgMACDChange)) {\r\n            // 현재 MACD 추세 방향 판단\r\n            const lastIndex = macdData.length - 1;\r\n            const currentMACD = macdData[lastIndex].MACD_Line;\r\n            const currentSignal = macdData[lastIndex].Signal_Line;\r\n\r\n            if (currentMACD > currentSignal) {\r\n                // 상승 추세에서 추세 강화\r\n                scoreAdjustment -= 1; // 매수 쪽으로\r\n            } else if (currentMACD < currentSignal) {\r\n                // 하락 추세에서 추세 강화\r\n                scoreAdjustment += 1; // 매도 쪽으로\r\n            }\r\n        }\r\n\r\n        // 기본 점수는 5점\r\n        let score = 5 + scoreAdjustment;\r\n\r\n        // 점수 범위 조정\r\n        score = Math.max(1, Math.min(10, score));\r\n\r\n        return score;\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (macdData.length > 0) {\r\n            const score = calculateTrendStrengthScore(macdData);\r\n            if (score !== null && onScoreCalculated) {\r\n                onScoreCalculated(score);\r\n            }\r\n        }\r\n    }, [macdData]);\r\n\r\n    return (\r\n        <div>\r\n            <FetchMACDData stockCode={stockCode} onMACDFetch={setMACDData} />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default MACDCalculations5;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}