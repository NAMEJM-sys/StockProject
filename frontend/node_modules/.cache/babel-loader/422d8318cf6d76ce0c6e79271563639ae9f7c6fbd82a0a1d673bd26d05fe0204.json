{"ast":null,"code":"var _jsxFileName = \"C:\\\\ProPython\\\\Stock2\\\\frontend\\\\src\\\\components\\\\MACDAnalysis2.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport FetchMACDData from \"./FetchMACDData\";\nimport FetchStockDataForCode from \"./FetchStockDataForCode\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction MACDAnalysis2({\n  stockCode\n}) {\n  _s();\n  const [macdData, setMACDData] = useState([]);\n  const [priceData, setPriceData] = useState([]);\n  const [divergence, setDivergence] = useState(null);\n  useEffect(() => {\n    if (macdData.length > 0 && priceData.length > 0) {\n      detectDivergence();\n    }\n  }, [macdData, priceData]);\n  const detectDivergence = () => {\n    let divergenceType = null;\n\n    // 최근 두 개의 피크 또는 바닥을 사용하여 분석\n    const recentMACDHighs = getRecentHighs(macdData, 'MACD');\n    const recentMACDLows = getRecentLows(macdData, 'MACD');\n    const recentPriceHighs = getRecentHighs(priceData, 'close');\n    const recentPriceLows = getRecentLows(priceData, 'close');\n\n    // 상승 다이버전스: 가격이 하락 저점을 갱신했지만 MACD는 그렇지 않은 경우\n    if (recentPriceLows.length >= 2 && recentMACDLows.length >= 2) {\n      if (recentPriceLows[1].value < recentPriceLows[0].value && recentMACDLows[1].value > recentMACDLows[0].value) {\n        divergenceType = \"상승 다이버전스: 가격은 하락했지만 MACD는 상승했습니다.\";\n      }\n    }\n\n    // 하락 다이버전스: 가격이 상승 고점을 갱신했지만 MACD는 그렇지 않은 경우\n    if (recentPriceHighs.length >= 2 && recentMACDHighs.length >= 2) {\n      if (recentPriceHighs[1].value > recentPriceHighs[0].value && recentMACDHighs[1].value < recentMACDHighs[0].value) {\n        divergenceType = \"하락 다이버전스: 가격은 상승했지만 MACD는 하락했습니다.\";\n      }\n    }\n    setDivergence(divergenceType);\n  };\n  const getRecentHighs = (data, key) => {\n    // 피크(고점) 찾기\n    return data.reduce((highs, item, index, array) => {\n      if (index === 0 || index === array.length - 1) return highs;\n      if (item[key] > array[index - 1][key] && item[key] > array[index + 1][key]) {\n        highs.push({\n          index,\n          value: item[key]\n        });\n      }\n      return highs;\n    }, []);\n  };\n  const getRecentLows = (data, key) => {\n    // 바닥(저점) 찾기\n    return data.reduce((lows, item, index, array) => {\n      if (index === 0 || index === array.length - 1) return lows;\n      if (item[key] < array[index - 1][key] && item[key] < array[index + 1][key]) {\n        lows.push({\n          index,\n          value: item[key]\n        });\n      }\n      return lows;\n    }, []);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(FetchMACDData, {\n      stockCode: stockCode,\n      onMACDFetch: setMACDData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(FetchStockDataForCode, {\n      stockCode: stockCode,\n      onSDFCFetch: setPriceData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n      className: \"analysis-text\",\n      children: \"Divergence \\uBD84\\uC11D\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this), divergence ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: divergence\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"\\uD604\\uC7AC MACD\\uC640 \\uAC00\\uACA9 \\uAC04\\uC758 \\uB2E4\\uC774\\uBC84\\uC804\\uC2A4\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 9\n  }, this);\n}\n_s(MACDAnalysis2, \"vCFT91M5zu7KnE8up3Ofjzq6QgQ=\");\n_c = MACDAnalysis2;\nexport default MACDAnalysis2;\nvar _c;\n$RefreshReg$(_c, \"MACDAnalysis2\");","map":{"version":3,"names":["React","useEffect","useState","FetchMACDData","FetchStockDataForCode","jsxDEV","_jsxDEV","MACDAnalysis2","stockCode","_s","macdData","setMACDData","priceData","setPriceData","divergence","setDivergence","length","detectDivergence","divergenceType","recentMACDHighs","getRecentHighs","recentMACDLows","getRecentLows","recentPriceHighs","recentPriceLows","value","data","key","reduce","highs","item","index","array","push","lows","children","onMACDFetch","fileName","_jsxFileName","lineNumber","columnNumber","onSDFCFetch","className","_c","$RefreshReg$"],"sources":["C:/ProPython/Stock2/frontend/src/components/MACDAnalysis2.js"],"sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport FetchMACDData from \"./FetchMACDData\";\r\nimport FetchStockDataForCode from \"./FetchStockDataForCode\";\r\n\r\nfunction MACDAnalysis2({ stockCode }) {\r\n    const [macdData, setMACDData] = useState([]);\r\n    const [priceData, setPriceData] = useState([]);\r\n    const [divergence, setDivergence] = useState(null);\r\n\r\n    useEffect(() => {\r\n        if (macdData.length > 0 && priceData.length > 0) {\r\n            detectDivergence();\r\n        }\r\n    }, [macdData, priceData]);\r\n\r\n    const detectDivergence = () => {\r\n        let divergenceType = null;\r\n\r\n        // 최근 두 개의 피크 또는 바닥을 사용하여 분석\r\n        const recentMACDHighs = getRecentHighs(macdData, 'MACD');\r\n        const recentMACDLows = getRecentLows(macdData, 'MACD');\r\n        const recentPriceHighs = getRecentHighs(priceData, 'close');\r\n        const recentPriceLows = getRecentLows(priceData, 'close');\r\n\r\n        // 상승 다이버전스: 가격이 하락 저점을 갱신했지만 MACD는 그렇지 않은 경우\r\n        if (recentPriceLows.length >= 2 && recentMACDLows.length >= 2) {\r\n            if (recentPriceLows[1].value < recentPriceLows[0].value &&\r\n                recentMACDLows[1].value > recentMACDLows[0].value) {\r\n                divergenceType = \"상승 다이버전스: 가격은 하락했지만 MACD는 상승했습니다.\";\r\n            }\r\n        }\r\n\r\n        // 하락 다이버전스: 가격이 상승 고점을 갱신했지만 MACD는 그렇지 않은 경우\r\n        if (recentPriceHighs.length >= 2 && recentMACDHighs.length >= 2) {\r\n            if (recentPriceHighs[1].value > recentPriceHighs[0].value &&\r\n                recentMACDHighs[1].value < recentMACDHighs[0].value) {\r\n                divergenceType = \"하락 다이버전스: 가격은 상승했지만 MACD는 하락했습니다.\";\r\n            }\r\n        }\r\n\r\n        setDivergence(divergenceType);\r\n    };\r\n\r\n    const getRecentHighs = (data, key) => {\r\n        // 피크(고점) 찾기\r\n        return data.reduce((highs, item, index, array) => {\r\n            if (index === 0 || index === array.length - 1) return highs;\r\n            if (item[key] > array[index - 1][key] && item[key] > array[index + 1][key]) {\r\n                highs.push({ index, value: item[key] });\r\n            }\r\n            return highs;\r\n        }, []);\r\n    };\r\n\r\n    const getRecentLows = (data, key) => {\r\n        // 바닥(저점) 찾기\r\n        return data.reduce((lows, item, index, array) => {\r\n            if (index === 0 || index === array.length - 1) return lows;\r\n            if (item[key] < array[index - 1][key] && item[key] < array[index + 1][key]) {\r\n                lows.push({ index, value: item[key] });\r\n            }\r\n            return lows;\r\n        }, []);\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <FetchMACDData stockCode={stockCode} onMACDFetch={setMACDData} />\r\n            <FetchStockDataForCode stockCode={stockCode} onSDFCFetch={setPriceData} />\r\n            <h4 className=\"analysis-text\">Divergence 분석</h4>\r\n            {divergence ? (\r\n                <p>{divergence}</p>\r\n            ) : (\r\n                <p>현재 MACD와 가격 간의 다이버전스가 없습니다.</p>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default MACDAnalysis2;"],"mappings":";;AAAA,OAAOA,KAAK,IAAGC,SAAS,EAAEC,QAAQ,QAAO,OAAO;AAChD,OAAOC,aAAa,MAAM,iBAAiB;AAC3C,OAAOC,qBAAqB,MAAM,yBAAyB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE5D,SAASC,aAAaA,CAAC;EAAEC;AAAU,CAAC,EAAE;EAAAC,EAAA;EAClC,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACU,SAAS,EAAEC,YAAY,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAACY,UAAU,EAAEC,aAAa,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC;EAElDD,SAAS,CAAC,MAAM;IACZ,IAAIS,QAAQ,CAACM,MAAM,GAAG,CAAC,IAAIJ,SAAS,CAACI,MAAM,GAAG,CAAC,EAAE;MAC7CC,gBAAgB,CAAC,CAAC;IACtB;EACJ,CAAC,EAAE,CAACP,QAAQ,EAAEE,SAAS,CAAC,CAAC;EAEzB,MAAMK,gBAAgB,GAAGA,CAAA,KAAM;IAC3B,IAAIC,cAAc,GAAG,IAAI;;IAEzB;IACA,MAAMC,eAAe,GAAGC,cAAc,CAACV,QAAQ,EAAE,MAAM,CAAC;IACxD,MAAMW,cAAc,GAAGC,aAAa,CAACZ,QAAQ,EAAE,MAAM,CAAC;IACtD,MAAMa,gBAAgB,GAAGH,cAAc,CAACR,SAAS,EAAE,OAAO,CAAC;IAC3D,MAAMY,eAAe,GAAGF,aAAa,CAACV,SAAS,EAAE,OAAO,CAAC;;IAEzD;IACA,IAAIY,eAAe,CAACR,MAAM,IAAI,CAAC,IAAIK,cAAc,CAACL,MAAM,IAAI,CAAC,EAAE;MAC3D,IAAIQ,eAAe,CAAC,CAAC,CAAC,CAACC,KAAK,GAAGD,eAAe,CAAC,CAAC,CAAC,CAACC,KAAK,IACnDJ,cAAc,CAAC,CAAC,CAAC,CAACI,KAAK,GAAGJ,cAAc,CAAC,CAAC,CAAC,CAACI,KAAK,EAAE;QACnDP,cAAc,GAAG,mCAAmC;MACxD;IACJ;;IAEA;IACA,IAAIK,gBAAgB,CAACP,MAAM,IAAI,CAAC,IAAIG,eAAe,CAACH,MAAM,IAAI,CAAC,EAAE;MAC7D,IAAIO,gBAAgB,CAAC,CAAC,CAAC,CAACE,KAAK,GAAGF,gBAAgB,CAAC,CAAC,CAAC,CAACE,KAAK,IACrDN,eAAe,CAAC,CAAC,CAAC,CAACM,KAAK,GAAGN,eAAe,CAAC,CAAC,CAAC,CAACM,KAAK,EAAE;QACrDP,cAAc,GAAG,mCAAmC;MACxD;IACJ;IAEAH,aAAa,CAACG,cAAc,CAAC;EACjC,CAAC;EAED,MAAME,cAAc,GAAGA,CAACM,IAAI,EAAEC,GAAG,KAAK;IAClC;IACA,OAAOD,IAAI,CAACE,MAAM,CAAC,CAACC,KAAK,EAAEC,IAAI,EAAEC,KAAK,EAAEC,KAAK,KAAK;MAC9C,IAAID,KAAK,KAAK,CAAC,IAAIA,KAAK,KAAKC,KAAK,CAAChB,MAAM,GAAG,CAAC,EAAE,OAAOa,KAAK;MAC3D,IAAIC,IAAI,CAACH,GAAG,CAAC,GAAGK,KAAK,CAACD,KAAK,GAAG,CAAC,CAAC,CAACJ,GAAG,CAAC,IAAIG,IAAI,CAACH,GAAG,CAAC,GAAGK,KAAK,CAACD,KAAK,GAAG,CAAC,CAAC,CAACJ,GAAG,CAAC,EAAE;QACxEE,KAAK,CAACI,IAAI,CAAC;UAAEF,KAAK;UAAEN,KAAK,EAAEK,IAAI,CAACH,GAAG;QAAE,CAAC,CAAC;MAC3C;MACA,OAAOE,KAAK;IAChB,CAAC,EAAE,EAAE,CAAC;EACV,CAAC;EAED,MAAMP,aAAa,GAAGA,CAACI,IAAI,EAAEC,GAAG,KAAK;IACjC;IACA,OAAOD,IAAI,CAACE,MAAM,CAAC,CAACM,IAAI,EAAEJ,IAAI,EAAEC,KAAK,EAAEC,KAAK,KAAK;MAC7C,IAAID,KAAK,KAAK,CAAC,IAAIA,KAAK,KAAKC,KAAK,CAAChB,MAAM,GAAG,CAAC,EAAE,OAAOkB,IAAI;MAC1D,IAAIJ,IAAI,CAACH,GAAG,CAAC,GAAGK,KAAK,CAACD,KAAK,GAAG,CAAC,CAAC,CAACJ,GAAG,CAAC,IAAIG,IAAI,CAACH,GAAG,CAAC,GAAGK,KAAK,CAACD,KAAK,GAAG,CAAC,CAAC,CAACJ,GAAG,CAAC,EAAE;QACxEO,IAAI,CAACD,IAAI,CAAC;UAAEF,KAAK;UAAEN,KAAK,EAAEK,IAAI,CAACH,GAAG;QAAE,CAAC,CAAC;MAC1C;MACA,OAAOO,IAAI;IACf,CAAC,EAAE,EAAE,CAAC;EACV,CAAC;EAED,oBACI5B,OAAA;IAAA6B,QAAA,gBACI7B,OAAA,CAACH,aAAa;MAACK,SAAS,EAAEA,SAAU;MAAC4B,WAAW,EAAEzB;IAAY;MAAA0B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eACjElC,OAAA,CAACF,qBAAqB;MAACI,SAAS,EAAEA,SAAU;MAACiC,WAAW,EAAE5B;IAAa;MAAAwB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAC1ElC,OAAA;MAAIoC,SAAS,EAAC,eAAe;MAAAP,QAAA,EAAC;IAAa;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,EAC/C1B,UAAU,gBACPR,OAAA;MAAA6B,QAAA,EAAIrB;IAAU;MAAAuB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,gBAEnBlC,OAAA;MAAA6B,QAAA,EAAG;IAA2B;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CACpC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACA,CAAC;AAEd;AAAC/B,EAAA,CAzEQF,aAAa;AAAAoC,EAAA,GAAbpC,aAAa;AA2EtB,eAAeA,aAAa;AAAC,IAAAoC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}