{"ast":null,"code":"var _jsxFileName = \"C:\\\\ProPython\\\\Stock2\\\\frontend\\\\src\\\\components\\\\MFIAnalysis2.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport FetchMFIData from \"../fetchcomponents/FetchMFIData\";\nimport FetchStockDataForCode from \"../fetchcomponents/FetchStockDataForCode\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst findLowPoint = (data, period, startIndex) => {\n  let lowest = {\n    price: Infinity,\n    index: -1,\n    date: \"\"\n  };\n  let currentPeriodEnd = startIndex;\n  let currentPeriodStart = Math.max(startIndex - period + 1, 0);\n  for (let i = currentPeriodEnd; i >= currentPeriodStart && i >= 2; i--) {\n    const a = data[i - 2];\n    const b = data[i - 1];\n    const c = data[i];\n    if (a.close > b.close && b.close < c.close || a.close >= b.close && b.close <= c.close) {\n      if (b.close < lowest.price) {\n        lowest = {\n          price: b.close,\n          index: i - 1,\n          date: b.date\n        };\n      }\n    }\n  }\n  return lowest.index !== -1 ? lowest : null;\n};\nconst findHighPoint = (data, period, startIndex) => {\n  let highest = {\n    price: -Infinity,\n    index: -1,\n    date: \"\"\n  };\n  let currentPeriodEnd = startIndex;\n  let currentPeriodStart = Math.max(startIndex - period + 1, 0);\n  for (let i = currentPeriodEnd; i >= currentPeriodStart && i >= 2; i--) {\n    const a = data[i - 2];\n    const b = data[i - 1];\n    const c = data[i];\n    if (a.close < b.close && b.close > c.close || a.close <= b.close && b.close >= c.close) {\n      if (b.close > highest.price) {\n        highest = {\n          price: b.close,\n          index: i - 1,\n          date: b.date\n        };\n      }\n    }\n  }\n  return highest.index !== -1 ? highest : null;\n};\nfunction MFIAnalysis2({\n  stockCode\n}) {\n  _s();\n  const [mfiData, setMFIData] = useState([]);\n  const [stockData, setStockData] = useState([]);\n  const [divergenceResult, setDivergenceResult] = useState(\"\");\n  const analyzeMFIDivergence = () => {\n    const period = 15; // 분석 기간 설정\n    const currentIndex = mfiData.length - 1;\n    const lowPointStock = findLowPoint(stockData, period, currentIndex);\n    const highPointStock = findHighPoint(stockData, period, currentIndex);\n    const lowPointMFI = findLowPoint(mfiData, period, currentIndex);\n    const highPointMFI = findHighPoint(mfiData, period, currentIndex);\n    let result = \"\";\n    if (lowPointStock && lowPointMFI && lowPointStock.price > lowPointMFI.price) {\n      result += `상승 다이버전스 감지: 주가는 저점에서 상승하고 있지만, MFI는 하락 중입니다. 이는 매수 신호일 수 있습니다.<br/>`;\n    }\n    if (highPointStock && highPointMFI && highPointStock.price < highPointMFI.price) {\n      result += `하락 다이버전스 감지: 주가는 고점에서 하락하고 있지만, MFI는 상승 중입니다. 이는 매도 신호일 수 있습니다.<br/>`;\n    }\n    if (!result) {\n      result = \"현재 다이버전스가 감지되지 않았습니다. 지속적인 모니터링이 필요합니다.\";\n    }\n    setDivergenceResult(result);\n  };\n  useEffect(() => {\n    if (mfiData.length > 0 && stockData.length > 0) {\n      analyzeMFIDivergence();\n    }\n  }, [mfiData, stockData]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(FetchMFIData, {\n      stockCode: stockCode,\n      onMFIFetch: setMFIData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(FetchStockDataForCode, {\n      stockCode: stockCode,\n      onSDFCFetch: setStockData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n      children: \"MFI Divergence \\uBD84\\uC11D\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      dangerouslySetInnerHTML: {\n        __html: divergenceResult.replace(/\\n/g, '<br />')\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 9\n  }, this);\n}\n_s(MFIAnalysis2, \"TAAoWKKF9hGkpgSxt0DG46hsSZs=\");\n_c = MFIAnalysis2;\nexport default MFIAnalysis2;\nvar _c;\n$RefreshReg$(_c, \"MFIAnalysis2\");","map":{"version":3,"names":["React","useState","useEffect","FetchMFIData","FetchStockDataForCode","jsxDEV","_jsxDEV","findLowPoint","data","period","startIndex","lowest","price","Infinity","index","date","currentPeriodEnd","currentPeriodStart","Math","max","i","a","b","c","close","findHighPoint","highest","MFIAnalysis2","stockCode","_s","mfiData","setMFIData","stockData","setStockData","divergenceResult","setDivergenceResult","analyzeMFIDivergence","currentIndex","length","lowPointStock","highPointStock","lowPointMFI","highPointMFI","result","children","onMFIFetch","fileName","_jsxFileName","lineNumber","columnNumber","onSDFCFetch","dangerouslySetInnerHTML","__html","replace","_c","$RefreshReg$"],"sources":["C:/ProPython/Stock2/frontend/src/components/MFIAnalysis2.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport FetchMFIData from \"../fetchcomponents/FetchMFIData\";\r\nimport FetchStockDataForCode from \"../fetchcomponents/FetchStockDataForCode\";\r\n\r\n\r\nconst findLowPoint = (data, period, startIndex) => {\r\n    let lowest = { price: Infinity, index: -1, date: \"\" };\r\n\r\n    let currentPeriodEnd = startIndex;\r\n    let currentPeriodStart = Math.max(startIndex - period + 1, 0);\r\n\r\n    for (let i = currentPeriodEnd; i >= currentPeriodStart && i >= 2; i--) {\r\n        const a = data[i - 2];\r\n        const b = data[i - 1];\r\n        const c = data[i];\r\n\r\n        if ((a.close > b.close && b.close < c.close) || (a.close >= b.close && b.close <= c.close)) {\r\n            if (b.close < lowest.price) {\r\n                lowest = { price: b.close, index: i - 1, date: b.date };\r\n            }\r\n        }\r\n    }\r\n\r\n    return lowest.index !== -1 ? lowest : null;\r\n};\r\n\r\nconst findHighPoint = (data, period, startIndex) => {\r\n    let highest = { price: -Infinity, index: -1, date: \"\" };\r\n\r\n    let currentPeriodEnd = startIndex;\r\n    let currentPeriodStart = Math.max(startIndex - period + 1, 0);\r\n\r\n    for (let i = currentPeriodEnd; i >= currentPeriodStart && i >= 2; i--) {\r\n        const a = data[i - 2];\r\n        const b = data[i - 1];\r\n        const c = data[i];\r\n\r\n        if ((a.close < b.close && b.close > c.close) || (a.close <= b.close && b.close >= c.close)) {\r\n            if (b.close > highest.price) {\r\n                highest = { price: b.close, index: i - 1, date: b.date };\r\n            }\r\n        }\r\n    }\r\n\r\n    return highest.index !== -1 ? highest : null;\r\n};\r\n\r\nfunction MFIAnalysis2({ stockCode }) {\r\n    const [mfiData, setMFIData] = useState([]);\r\n    const [stockData, setStockData] = useState([]);\r\n    const [divergenceResult, setDivergenceResult] = useState(\"\");\r\n\r\n    const analyzeMFIDivergence = () => {\r\n        const period = 15; // 분석 기간 설정\r\n        const currentIndex = mfiData.length - 1;\r\n\r\n        const lowPointStock = findLowPoint(stockData, period, currentIndex);\r\n        const highPointStock = findHighPoint(stockData, period, currentIndex);\r\n\r\n        const lowPointMFI = findLowPoint(mfiData, period, currentIndex);\r\n        const highPointMFI = findHighPoint(mfiData, period, currentIndex);\r\n\r\n        let result = \"\";\r\n\r\n        if (lowPointStock && lowPointMFI && lowPointStock.price > lowPointMFI.price) {\r\n            result += `상승 다이버전스 감지: 주가는 저점에서 상승하고 있지만, MFI는 하락 중입니다. 이는 매수 신호일 수 있습니다.<br/>`;\r\n        }\r\n\r\n        if (highPointStock && highPointMFI && highPointStock.price < highPointMFI.price) {\r\n            result += `하락 다이버전스 감지: 주가는 고점에서 하락하고 있지만, MFI는 상승 중입니다. 이는 매도 신호일 수 있습니다.<br/>`;\r\n        }\r\n\r\n        if (!result) {\r\n            result = \"현재 다이버전스가 감지되지 않았습니다. 지속적인 모니터링이 필요합니다.\";\r\n        }\r\n\r\n        setDivergenceResult(result);\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (mfiData.length > 0 && stockData.length > 0) {\r\n            analyzeMFIDivergence();\r\n        }\r\n    }, [mfiData, stockData]);\r\n\r\n    return (\r\n        <div>\r\n            <FetchMFIData stockCode={stockCode} onMFIFetch={setMFIData} />\r\n            <FetchStockDataForCode stockCode={stockCode} onSDFCFetch={setStockData} />\r\n            <h4>MFI Divergence 분석</h4>\r\n            <p dangerouslySetInnerHTML={{ __html: divergenceResult.replace(/\\n/g, '<br />') }}></p>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default MFIAnalysis2;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAOC,YAAY,MAAM,iCAAiC;AAC1D,OAAOC,qBAAqB,MAAM,0CAA0C;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAG7E,MAAMC,YAAY,GAAGA,CAACC,IAAI,EAAEC,MAAM,EAAEC,UAAU,KAAK;EAC/C,IAAIC,MAAM,GAAG;IAAEC,KAAK,EAAEC,QAAQ;IAAEC,KAAK,EAAE,CAAC,CAAC;IAAEC,IAAI,EAAE;EAAG,CAAC;EAErD,IAAIC,gBAAgB,GAAGN,UAAU;EACjC,IAAIO,kBAAkB,GAAGC,IAAI,CAACC,GAAG,CAACT,UAAU,GAAGD,MAAM,GAAG,CAAC,EAAE,CAAC,CAAC;EAE7D,KAAK,IAAIW,CAAC,GAAGJ,gBAAgB,EAAEI,CAAC,IAAIH,kBAAkB,IAAIG,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;IACnE,MAAMC,CAAC,GAAGb,IAAI,CAACY,CAAC,GAAG,CAAC,CAAC;IACrB,MAAME,CAAC,GAAGd,IAAI,CAACY,CAAC,GAAG,CAAC,CAAC;IACrB,MAAMG,CAAC,GAAGf,IAAI,CAACY,CAAC,CAAC;IAEjB,IAAKC,CAAC,CAACG,KAAK,GAAGF,CAAC,CAACE,KAAK,IAAIF,CAAC,CAACE,KAAK,GAAGD,CAAC,CAACC,KAAK,IAAMH,CAAC,CAACG,KAAK,IAAIF,CAAC,CAACE,KAAK,IAAIF,CAAC,CAACE,KAAK,IAAID,CAAC,CAACC,KAAM,EAAE;MACxF,IAAIF,CAAC,CAACE,KAAK,GAAGb,MAAM,CAACC,KAAK,EAAE;QACxBD,MAAM,GAAG;UAAEC,KAAK,EAAEU,CAAC,CAACE,KAAK;UAAEV,KAAK,EAAEM,CAAC,GAAG,CAAC;UAAEL,IAAI,EAAEO,CAAC,CAACP;QAAK,CAAC;MAC3D;IACJ;EACJ;EAEA,OAAOJ,MAAM,CAACG,KAAK,KAAK,CAAC,CAAC,GAAGH,MAAM,GAAG,IAAI;AAC9C,CAAC;AAED,MAAMc,aAAa,GAAGA,CAACjB,IAAI,EAAEC,MAAM,EAAEC,UAAU,KAAK;EAChD,IAAIgB,OAAO,GAAG;IAAEd,KAAK,EAAE,CAACC,QAAQ;IAAEC,KAAK,EAAE,CAAC,CAAC;IAAEC,IAAI,EAAE;EAAG,CAAC;EAEvD,IAAIC,gBAAgB,GAAGN,UAAU;EACjC,IAAIO,kBAAkB,GAAGC,IAAI,CAACC,GAAG,CAACT,UAAU,GAAGD,MAAM,GAAG,CAAC,EAAE,CAAC,CAAC;EAE7D,KAAK,IAAIW,CAAC,GAAGJ,gBAAgB,EAAEI,CAAC,IAAIH,kBAAkB,IAAIG,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;IACnE,MAAMC,CAAC,GAAGb,IAAI,CAACY,CAAC,GAAG,CAAC,CAAC;IACrB,MAAME,CAAC,GAAGd,IAAI,CAACY,CAAC,GAAG,CAAC,CAAC;IACrB,MAAMG,CAAC,GAAGf,IAAI,CAACY,CAAC,CAAC;IAEjB,IAAKC,CAAC,CAACG,KAAK,GAAGF,CAAC,CAACE,KAAK,IAAIF,CAAC,CAACE,KAAK,GAAGD,CAAC,CAACC,KAAK,IAAMH,CAAC,CAACG,KAAK,IAAIF,CAAC,CAACE,KAAK,IAAIF,CAAC,CAACE,KAAK,IAAID,CAAC,CAACC,KAAM,EAAE;MACxF,IAAIF,CAAC,CAACE,KAAK,GAAGE,OAAO,CAACd,KAAK,EAAE;QACzBc,OAAO,GAAG;UAAEd,KAAK,EAAEU,CAAC,CAACE,KAAK;UAAEV,KAAK,EAAEM,CAAC,GAAG,CAAC;UAAEL,IAAI,EAAEO,CAAC,CAACP;QAAK,CAAC;MAC5D;IACJ;EACJ;EAEA,OAAOW,OAAO,CAACZ,KAAK,KAAK,CAAC,CAAC,GAAGY,OAAO,GAAG,IAAI;AAChD,CAAC;AAED,SAASC,YAAYA,CAAC;EAAEC;AAAU,CAAC,EAAE;EAAAC,EAAA;EACjC,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAG9B,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAAC+B,SAAS,EAAEC,YAAY,CAAC,GAAGhC,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAACiC,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGlC,QAAQ,CAAC,EAAE,CAAC;EAE5D,MAAMmC,oBAAoB,GAAGA,CAAA,KAAM;IAC/B,MAAM3B,MAAM,GAAG,EAAE,CAAC,CAAC;IACnB,MAAM4B,YAAY,GAAGP,OAAO,CAACQ,MAAM,GAAG,CAAC;IAEvC,MAAMC,aAAa,GAAGhC,YAAY,CAACyB,SAAS,EAAEvB,MAAM,EAAE4B,YAAY,CAAC;IACnE,MAAMG,cAAc,GAAGf,aAAa,CAACO,SAAS,EAAEvB,MAAM,EAAE4B,YAAY,CAAC;IAErE,MAAMI,WAAW,GAAGlC,YAAY,CAACuB,OAAO,EAAErB,MAAM,EAAE4B,YAAY,CAAC;IAC/D,MAAMK,YAAY,GAAGjB,aAAa,CAACK,OAAO,EAAErB,MAAM,EAAE4B,YAAY,CAAC;IAEjE,IAAIM,MAAM,GAAG,EAAE;IAEf,IAAIJ,aAAa,IAAIE,WAAW,IAAIF,aAAa,CAAC3B,KAAK,GAAG6B,WAAW,CAAC7B,KAAK,EAAE;MACzE+B,MAAM,IAAI,sEAAsE;IACpF;IAEA,IAAIH,cAAc,IAAIE,YAAY,IAAIF,cAAc,CAAC5B,KAAK,GAAG8B,YAAY,CAAC9B,KAAK,EAAE;MAC7E+B,MAAM,IAAI,sEAAsE;IACpF;IAEA,IAAI,CAACA,MAAM,EAAE;MACTA,MAAM,GAAG,yCAAyC;IACtD;IAEAR,mBAAmB,CAACQ,MAAM,CAAC;EAC/B,CAAC;EAEDzC,SAAS,CAAC,MAAM;IACZ,IAAI4B,OAAO,CAACQ,MAAM,GAAG,CAAC,IAAIN,SAAS,CAACM,MAAM,GAAG,CAAC,EAAE;MAC5CF,oBAAoB,CAAC,CAAC;IAC1B;EACJ,CAAC,EAAE,CAACN,OAAO,EAAEE,SAAS,CAAC,CAAC;EAExB,oBACI1B,OAAA;IAAAsC,QAAA,gBACItC,OAAA,CAACH,YAAY;MAACyB,SAAS,EAAEA,SAAU;MAACiB,UAAU,EAAEd;IAAW;MAAAe,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAC9D3C,OAAA,CAACF,qBAAqB;MAACwB,SAAS,EAAEA,SAAU;MAACsB,WAAW,EAAEjB;IAAa;MAAAa,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAC1E3C,OAAA;MAAAsC,QAAA,EAAI;IAAiB;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAC1B3C,OAAA;MAAG6C,uBAAuB,EAAE;QAAEC,MAAM,EAAElB,gBAAgB,CAACmB,OAAO,CAAC,KAAK,EAAE,QAAQ;MAAE;IAAE;MAAAP,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACtF,CAAC;AAEd;AAACpB,EAAA,CA9CQF,YAAY;AAAA2B,EAAA,GAAZ3B,YAAY;AAgDrB,eAAeA,YAAY;AAAC,IAAA2B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}