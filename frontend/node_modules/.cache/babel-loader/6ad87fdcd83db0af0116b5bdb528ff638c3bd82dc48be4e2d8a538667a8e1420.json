{"ast":null,"code":"var _jsxFileName = \"C:\\\\ProPython\\\\Stock2\\\\frontend\\\\src\\\\components\\\\MACDAnalysis2.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport FetchMACDData from \"./FetchMACDData\";\nimport FetchStockDataForCode from \"./FetchStockDataForCode\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction MACDAnalysis2({\n  stockCode\n}) {\n  _s();\n  const [macdData, setMACDData] = useState([]);\n  const [priceData, setPriceData] = useState([]);\n  const [divergence, setDivergence] = useState(null);\n  useEffect(() => {\n    if (macdData.length > 0 && priceData.length > 0) {\n      detectDivergence();\n    }\n  }, [macdData, priceData]);\n  const detectDivergence = () => {\n    let divergenceType = null;\n    let recommendation = \"\";\n\n    // 최근 두 개의 피크 또는 바닥을 사용하여 분석\n    const recentMACDHighs = getRecentHighs(macdData, 'MACD');\n    const recentMACDLows = getRecentLows(macdData, 'MACD');\n    const recentPriceHighs = getRecentHighs(priceData, 'close');\n    const recentPriceLows = getRecentLows(priceData, 'close');\n\n    // 상승 다이버전스: 가격이 하락 저점을 갱신했지만 MACD는 그렇지 않은 경우\n    if (recentPriceLows.length >= 2 && recentMACDLows.length >= 2) {\n      if (recentPriceLows[1].value < recentPriceLows[0].value && recentMACDLows[1].value > recentMACDLows[0].value) {\n        divergenceType = \"상승 다이버전스: 가격은 하락했지만 MACD는 상승했습니다.\";\n        recommendation = \"매수 고려: 다이버전스 발생 시점에서 매수 진입을 고려할 수 있습니다.\";\n      }\n    }\n\n    // 하락 다이버전스: 가격이 상승 고점을 갱신했지만 MACD는 그렇지 않은 경우\n    if (recentPriceHighs.length >= 2 && recentMACDHighs.length >= 2) {\n      if (recentPriceHighs[1].value > recentPriceHighs[0].value && recentMACDHighs[1].value < recentMACDHighs[0].value) {\n        divergenceType = \"하락 다이버전스: 가격은 상승했지만 MACD는 하락했습니다.\";\n        recommendation = \"매도 고려: 다이버전스 발생 시점에서 매도 진입을 고려할 수 있습니다.\";\n      }\n    }\n    setDivergence({\n      type: divergenceType,\n      recommendation\n    });\n  };\n  const getRecentHighs = (data, key) => {\n    // 피크(고점) 찾기\n    return data.reduce((highs, item, index, array) => {\n      if (index === 0 || index === array.length - 1) return highs;\n      if (item[key] > array[index - 1][key] && item[key] > array[index + 1][key]) {\n        highs.push({\n          index,\n          value: item[key]\n        });\n      }\n      return highs;\n    }, []);\n  };\n  const getRecentLows = (data, key) => {\n    // 바닥(저점) 찾기\n    return data.reduce((lows, item, index, array) => {\n      if (index === 0 || index === array.length - 1) return lows;\n      if (item[key] < array[index - 1][key] && item[key] < array[index + 1][key]) {\n        lows.push({\n          index,\n          value: item[key]\n        });\n      }\n      return lows;\n    }, []);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(FetchMACDData, {\n      stockCode: stockCode,\n      onMACDFetch: setMACDData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(FetchStockDataForCode, {\n      stockCode: stockCode,\n      onSDFCFetch: setPriceData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n      className: \"analysis-text\",\n      children: \"Divergence \\uBD84\\uC11D\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this), divergence ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [divergence.type, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 41\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: divergence.recommendation\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"\\uD604\\uC7AC MACD\\uC640 \\uAC00\\uACA9 \\uAC04\\uC758 \\uB2E4\\uC774\\uBC84\\uC804\\uC2A4\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 9\n  }, this);\n}\n_s(MACDAnalysis2, \"vCFT91M5zu7KnE8up3Ofjzq6QgQ=\");\n_c = MACDAnalysis2;\nexport default MACDAnalysis2;\nvar _c;\n$RefreshReg$(_c, \"MACDAnalysis2\");","map":{"version":3,"names":["React","useEffect","useState","FetchMACDData","FetchStockDataForCode","jsxDEV","_jsxDEV","Fragment","_Fragment","MACDAnalysis2","stockCode","_s","macdData","setMACDData","priceData","setPriceData","divergence","setDivergence","length","detectDivergence","divergenceType","recommendation","recentMACDHighs","getRecentHighs","recentMACDLows","getRecentLows","recentPriceHighs","recentPriceLows","value","type","data","key","reduce","highs","item","index","array","push","lows","children","onMACDFetch","fileName","_jsxFileName","lineNumber","columnNumber","onSDFCFetch","className","_c","$RefreshReg$"],"sources":["C:/ProPython/Stock2/frontend/src/components/MACDAnalysis2.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport FetchMACDData from \"./FetchMACDData\";\r\nimport FetchStockDataForCode from \"./FetchStockDataForCode\";\r\n\r\nfunction MACDAnalysis2({ stockCode }) {\r\n    const [macdData, setMACDData] = useState([]);\r\n    const [priceData, setPriceData] = useState([]);\r\n    const [divergence, setDivergence] = useState(null);\r\n\r\n    useEffect(() => {\r\n        if (macdData.length > 0 && priceData.length > 0) {\r\n            detectDivergence();\r\n        }\r\n    }, [macdData, priceData]);\r\n\r\n    const detectDivergence = () => {\r\n        let divergenceType = null;\r\n        let recommendation = \"\";\r\n\r\n        // 최근 두 개의 피크 또는 바닥을 사용하여 분석\r\n        const recentMACDHighs = getRecentHighs(macdData, 'MACD');\r\n        const recentMACDLows = getRecentLows(macdData, 'MACD');\r\n        const recentPriceHighs = getRecentHighs(priceData, 'close');\r\n        const recentPriceLows = getRecentLows(priceData, 'close');\r\n\r\n        // 상승 다이버전스: 가격이 하락 저점을 갱신했지만 MACD는 그렇지 않은 경우\r\n        if (recentPriceLows.length >= 2 && recentMACDLows.length >= 2) {\r\n            if (recentPriceLows[1].value < recentPriceLows[0].value &&\r\n                recentMACDLows[1].value > recentMACDLows[0].value) {\r\n                divergenceType = \"상승 다이버전스: 가격은 하락했지만 MACD는 상승했습니다.\";\r\n                recommendation = \"매수 고려: 다이버전스 발생 시점에서 매수 진입을 고려할 수 있습니다.\";\r\n            }\r\n        }\r\n\r\n        // 하락 다이버전스: 가격이 상승 고점을 갱신했지만 MACD는 그렇지 않은 경우\r\n        if (recentPriceHighs.length >= 2 && recentMACDHighs.length >= 2) {\r\n            if (recentPriceHighs[1].value > recentPriceHighs[0].value &&\r\n                recentMACDHighs[1].value < recentMACDHighs[0].value) {\r\n                divergenceType = \"하락 다이버전스: 가격은 상승했지만 MACD는 하락했습니다.\";\r\n                recommendation = \"매도 고려: 다이버전스 발생 시점에서 매도 진입을 고려할 수 있습니다.\";\r\n            }\r\n        }\r\n\r\n        setDivergence({ type: divergenceType, recommendation });\r\n    };\r\n\r\n    const getRecentHighs = (data, key) => {\r\n        // 피크(고점) 찾기\r\n        return data.reduce((highs, item, index, array) => {\r\n            if (index === 0 || index === array.length - 1) return highs;\r\n            if (item[key] > array[index - 1][key] && item[key] > array[index + 1][key]) {\r\n                highs.push({ index, value: item[key] });\r\n            }\r\n            return highs;\r\n        }, []);\r\n    };\r\n\r\n    const getRecentLows = (data, key) => {\r\n        // 바닥(저점) 찾기\r\n        return data.reduce((lows, item, index, array) => {\r\n            if (index === 0 || index === array.length - 1) return lows;\r\n            if (item[key] < array[index - 1][key] && item[key] < array[index + 1][key]) {\r\n                lows.push({ index, value: item[key] });\r\n            }\r\n            return lows;\r\n        }, []);\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <FetchMACDData stockCode={stockCode} onMACDFetch={setMACDData} />\r\n            <FetchStockDataForCode stockCode={stockCode} onSDFCFetch={setPriceData} />\r\n            <h4 className=\"analysis-text\">Divergence 분석</h4>\r\n            {divergence ? (\r\n                <>\r\n                    <p>{divergence.type}<br/></p>\r\n                    <p>{divergence.recommendation}</p>\r\n                </>\r\n            ) : (\r\n                <p>현재 MACD와 가격 간의 다이버전스가 없습니다.</p>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default MACDAnalysis2;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}