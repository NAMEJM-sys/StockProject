{"ast":null,"code":"var _jsxFileName = \"C:\\\\ProPython\\\\Stock2\\\\frontend\\\\src\\\\ComponentsAnalysis\\\\MACDAnalysis2.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport FetchMACDData from '../ComponentsFetch/FetchMACDData';\nimport FetchStockDataForCode from '../ComponentsFetch/FetchStockDataForCode';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction MACDAnalysis2({\n  stockCode\n}) {\n  _s();\n  const [macdData, setMACDData] = useState([]);\n  const [stockData, setStockData] = useState([]);\n  const [analysisResult, setAnalysisResult] = useState('');\n  const analyzeMACDDivergence = () => {\n    if (macdData.length < 2 || stockData.length < 2) {\n      setAnalysisResult('데이터가 충분하지 않습니다.');\n      return;\n    }\n\n    // 최근 두 개의 고점 및 저점 찾기\n    const findSwingPoints = (data, key) => {\n      let swings = [];\n      for (let i = 1; i < data.length - 1; i++) {\n        if (data[i - 1][key] < data[i][key] && data[i + 1][key] < data[i][key]) {\n          swings.push({\n            type: 'high',\n            value: data[i][key],\n            index: i,\n            date: data[i].date\n          });\n        }\n        if (data[i - 1][key] > data[i][key] && data[i + 1][key] > data[i][key]) {\n          swings.push({\n            type: 'low',\n            value: data[i][key],\n            index: i,\n            date: data[i].date\n          });\n        }\n      }\n      return swings;\n    };\n    const priceSwings = findSwingPoints(stockData, 'close');\n    const macdSwings = findSwingPoints(macdData, 'MACD_Line');\n    let result = '';\n\n    // 상승 다이버전스 확인\n    const priceLows = priceSwings.filter(swing => swing.type === 'low');\n    const macdLows = macdSwings.filter(swing => swing.type === 'low');\n    if (priceLows.length >= 2 && macdLows.length >= 2) {\n      const latestPriceLow = priceLows[priceLows.length - 1];\n      const prevPriceLow = priceLows[priceLows.length - 2];\n      const latestMACDLow = macdLows[macdLows.length - 1];\n      const prevMACDLow = macdLows[macdLows.length - 2];\n      if (latestPriceLow.value < prevPriceLow.value && latestMACDLow.value > prevMACDLow.value) {\n        result += `상승 다이버전스 발생: 가격은 하락하고 있지만 MACD는 상승하고 있습니다. 이는 매수 신호일 수 있습니다.<br/>`;\n      }\n    }\n\n    // 하락 다이버전스 확인\n    const priceHighs = priceSwings.filter(swing => swing.type === 'high');\n    const macdHighs = macdSwings.filter(swing => swing.type === 'high');\n    if (priceHighs.length >= 2 && macdHighs.length >= 2) {\n      const latestPriceHigh = priceHighs[priceHighs.length - 1];\n      const prevPriceHigh = priceHighs[priceHighs.length - 2];\n      const latestMACDHigh = macdHighs[macdHighs.length - 1];\n      const prevMACDHigh = macdHighs[macdHighs.length - 2];\n      if (latestPriceHigh.value > prevPriceHigh.value && latestMACDHigh.value < prevMACDHigh.value) {\n        result += `하락 다이버전스 발생: 가격은 상승하고 있지만 MACD는 하락하고 있습니다. 이는 매도 신호일 수 있습니다.<br/>`;\n      }\n    }\n    if (!result) {\n      result = '현재 다이버전스가 감지되지 않았습니다.';\n    }\n    setAnalysisResult(result);\n  };\n  useEffect(() => {\n    if (macdData.length > 0 && stockData.length > 0) {\n      analyzeMACDDivergence();\n    }\n  }, [macdData, stockData]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(FetchMACDData, {\n      stockCode: stockCode,\n      onMACDFetch: setMACDData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(FetchStockDataForCode, {\n      stockCode: stockCode,\n      onSDFCFetch: setStockData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n      children: \"MACD \\uB2E4\\uC774\\uBC84\\uC804\\uC2A4 \\uBD84\\uC11D\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      dangerouslySetInnerHTML: {\n        __html: analysisResult\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 9\n  }, this);\n}\n_s(MACDAnalysis2, \"HJLZTQNx2MLFtpTzhHVEbVBNmdc=\");\n_c = MACDAnalysis2;\nexport default MACDAnalysis2;\nvar _c;\n$RefreshReg$(_c, \"MACDAnalysis2\");","map":{"version":3,"names":["React","useState","useEffect","FetchMACDData","FetchStockDataForCode","jsxDEV","_jsxDEV","MACDAnalysis2","stockCode","_s","macdData","setMACDData","stockData","setStockData","analysisResult","setAnalysisResult","analyzeMACDDivergence","length","findSwingPoints","data","key","swings","i","push","type","value","index","date","priceSwings","macdSwings","result","priceLows","filter","swing","macdLows","latestPriceLow","prevPriceLow","latestMACDLow","prevMACDLow","priceHighs","macdHighs","latestPriceHigh","prevPriceHigh","latestMACDHigh","prevMACDHigh","children","onMACDFetch","fileName","_jsxFileName","lineNumber","columnNumber","onSDFCFetch","dangerouslySetInnerHTML","__html","_c","$RefreshReg$"],"sources":["C:/ProPython/Stock2/frontend/src/ComponentsAnalysis/MACDAnalysis2.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport FetchMACDData from '../ComponentsFetch/FetchMACDData';\r\nimport FetchStockDataForCode from '../ComponentsFetch/FetchStockDataForCode';\r\n\r\nfunction MACDAnalysis2({ stockCode }) {\r\n    const [macdData, setMACDData] = useState([]);\r\n    const [stockData, setStockData] = useState([]);\r\n    const [analysisResult, setAnalysisResult] = useState('');\r\n\r\n    const analyzeMACDDivergence = () => {\r\n        if (macdData.length < 2 || stockData.length < 2) {\r\n            setAnalysisResult('데이터가 충분하지 않습니다.');\r\n            return;\r\n        }\r\n\r\n        // 최근 두 개의 고점 및 저점 찾기\r\n        const findSwingPoints = (data, key) => {\r\n            let swings = [];\r\n            for (let i = 1; i < data.length - 1; i++) {\r\n                if (data[i - 1][key] < data[i][key] && data[i + 1][key] < data[i][key]) {\r\n                    swings.push({ type: 'high', value: data[i][key], index: i, date: data[i].date });\r\n                }\r\n                if (data[i - 1][key] > data[i][key] && data[i + 1][key] > data[i][key]) {\r\n                    swings.push({ type: 'low', value: data[i][key], index: i, date: data[i].date });\r\n                }\r\n            }\r\n            return swings;\r\n        };\r\n\r\n        const priceSwings = findSwingPoints(stockData, 'close');\r\n        const macdSwings = findSwingPoints(macdData, 'MACD_Line');\r\n\r\n        let result = '';\r\n\r\n        // 상승 다이버전스 확인\r\n        const priceLows = priceSwings.filter(swing => swing.type === 'low');\r\n        const macdLows = macdSwings.filter(swing => swing.type === 'low');\r\n\r\n        if (priceLows.length >= 2 && macdLows.length >= 2) {\r\n            const latestPriceLow = priceLows[priceLows.length - 1];\r\n            const prevPriceLow = priceLows[priceLows.length - 2];\r\n\r\n            const latestMACDLow = macdLows[macdLows.length - 1];\r\n            const prevMACDLow = macdLows[macdLows.length - 2];\r\n\r\n            if (latestPriceLow.value < prevPriceLow.value && latestMACDLow.value > prevMACDLow.value) {\r\n                result += `상승 다이버전스 발생: 가격은 하락하고 있지만 MACD는 상승하고 있습니다. 이는 매수 신호일 수 있습니다.<br/>`;\r\n            }\r\n        }\r\n\r\n        // 하락 다이버전스 확인\r\n        const priceHighs = priceSwings.filter(swing => swing.type === 'high');\r\n        const macdHighs = macdSwings.filter(swing => swing.type === 'high');\r\n\r\n        if (priceHighs.length >= 2 && macdHighs.length >= 2) {\r\n            const latestPriceHigh = priceHighs[priceHighs.length - 1];\r\n            const prevPriceHigh = priceHighs[priceHighs.length - 2];\r\n\r\n            const latestMACDHigh = macdHighs[macdHighs.length - 1];\r\n            const prevMACDHigh = macdHighs[macdHighs.length - 2];\r\n\r\n            if (latestPriceHigh.value > prevPriceHigh.value && latestMACDHigh.value < prevMACDHigh.value) {\r\n                result += `하락 다이버전스 발생: 가격은 상승하고 있지만 MACD는 하락하고 있습니다. 이는 매도 신호일 수 있습니다.<br/>`;\r\n            }\r\n        }\r\n\r\n        if (!result) {\r\n            result = '현재 다이버전스가 감지되지 않았습니다.';\r\n        }\r\n\r\n        setAnalysisResult(result);\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (macdData.length > 0 && stockData.length > 0) {\r\n            analyzeMACDDivergence();\r\n        }\r\n    }, [macdData, stockData]);\r\n\r\n    return (\r\n        <div>\r\n            <FetchMACDData stockCode={stockCode} onMACDFetch={setMACDData} />\r\n            <FetchStockDataForCode stockCode={stockCode} onSDFCFetch={setStockData} />\r\n            <h4>MACD 다이버전스 분석</h4>\r\n            <p dangerouslySetInnerHTML={{ __html: analysisResult }}></p>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default MACDAnalysis2;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}